(function(e){function t(t){for(var a,o,l=t[0],i=t[1],u=t[2],d=0,f=[];d<l.length;d++)o=l[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&f.push(n[o][0]),n[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);c&&c(t);while(f.length)f.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,l=1;l<r.length;l++){var i=r[l];0!==n[i]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},n={app:0},s=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var c=i;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("router-view")],1)},s=[],o={name:"App",data:function(){return{}}},l=o,i=r("2877"),u=r("6544"),c=r.n(u),d=r("7496"),f=Object(i["a"])(l,n,s,!1,null,null,null),m=f.exports;c()(f,{VApp:d["a"]});var p=r("2f62"),v=(r("d3b7"),{login:h,logout:b,register:w,getAll:x}),g="https://registrationform.free.beeceptor.com";function h(e,t){var r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})};return fetch("".concat(g,"/login"),r).then(y).then((function(e){return e.token&&localStorage.setItem("user",JSON.stringify(e)),e}))}function b(){localStorage.removeItem("user")}function w(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("".concat(g,"/register"),t).then(y)}function x(){var e={method:"GET",headers:k()};return fetch("".concat(g,"/users"),e).then(y)}function y(e){return e.text().then((function(t){var r=t&&JSON.parse(t);if(!e.ok){401===e.status&&(b(),location.reload(!0));var a=r&&r.message||e.statusText;return Promise.reject(a)}return r.users?r.users:r}))}function k(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.token?{Authorization:"Bearer "+e.token}:{}}r("caad");var _=r("8c4f"),O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{persistent:"","max-width":"600px","min-width":"360px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("div",[r("v-tabs",{attrs:{"show-arrows":"","background-color":"deep-purple accent-4","icons-and-text":"",dark:"",grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[r("v-tabs-slider",{attrs:{color:"purple darken-4"}}),e._l(e.tabs,(function(t,a){return r("v-tab",{key:a},[r("v-icon",{attrs:{large:""}},[e._v(e._s(t.icon))]),r("div",{staticClass:"caption py-1"},[e._v(e._s(t.name))])],1)})),r("v-tab-item",[r("v-card",{staticClass:"px-4"},[r("v-card-text",[r("v-form",{ref:"loginForm",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{rules:e.loginEmailRules,label:"E-mail",required:""},model:{value:e.loginEmail,callback:function(t){e.loginEmail=t},expression:"loginEmail"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{"append-icon":e.show1?"eye":"eye-off",rules:[e.rules.required,e.rules.min],type:e.show1?"text":"password",name:"input-10-1",label:"Password",hint:"At least 8 characters",counter:""},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.loginPassword,callback:function(t){e.loginPassword=t},expression:"loginPassword"}})],1),r("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"6",xsm:"12"}}),r("v-spacer"),r("v-col",{staticClass:"d-flex",attrs:{cols:"12",sm:"3",xsm:"12","align-end":""}},[r("v-btn",{attrs:{"x-large":"",block:"",disabled:!e.valid,color:"success"},on:{click:e.validate}},[e._v(" Login ")])],1)],1)],1)],1)],1)],1),r("v-tab-item",[r("v-card",{staticClass:"px-4"},[r("v-card-text",[r("v-form",{ref:"registerForm",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[r("v-text-field",{attrs:{rules:[e.rules.required],label:"First Name",maxlength:"20",required:""},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}})],1),r("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[r("v-text-field",{attrs:{rules:[e.rules.required],label:"Last Name",maxlength:"20",required:""},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{rules:e.emailRules,label:"E-mail",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{"append-icon":e.show1?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.min],type:e.show1?"text":"password",name:"input-10-1",label:"Password",hint:"At least 8 characters",counter:""},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{block:"","append-icon":e.show1?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.passwordMatch],type:e.show1?"text":"password",name:"input-10-1",label:"Confirm Password",counter:""},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.verify,callback:function(t){e.verify=t},expression:"verify"}})],1),r("v-spacer"),r("v-col",{staticClass:"d-flex ml-auto",attrs:{cols:"12",sm:"3",xsm:"12"}},[r("v-btn",{attrs:{"x-large":"",block:"",disabled:!e.valid,color:"success"},on:{click:e.validate}},[e._v("Register")])],1)],1)],1)],1)],1)],1)],2)],1)])},S=[],j=r("5530"),N={name:"RegestrationForm",computed:{passwordMatch:function(){var e=this;return function(){return e.password===e.verify||"Password must match"}}},methods:Object(j["a"])(Object(j["a"])({},Object(p["b"])("user",["register","login"])),{},{validate:function(){this.$refs.loginForm.validate()&&(1===this.tab&&(this.register({name:this.firstName+" "+this.lastName,email:this.email,password:this.password}),this.tab=0),0===this.tab&&this.login({username:this.email,password:this.password}))},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()}}),data:function(){return{dialog:!0,tab:0,tabs:[{name:"Login",icon:"mdi-account"},{name:"Register",icon:"mdi-account-outline"}],valid:!0,firstName:"",lastName:"",email:"",password:"",verify:"",loginPassword:"",loginEmail:"",loginEmailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],emailRules:[function(e){return!!e||"Required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],show1:!1,rules:{required:function(e){return!!e||"Required."},min:function(e){return e&&e.length>=8||"Min 8 characters"}}}}},P=N,V=r("8336"),R=r("b0af"),q=r("99d9"),A=r("62ad"),E=r("169a"),T=r("4bd4"),C=r("132d"),F=r("0fd9"),I=r("2fa4"),J=r("71a3"),M=r("c671"),$=r("fe57"),L=r("9a96"),U=r("8654"),z=Object(i["a"])(P,O,S,!1,null,null,null),B=z.exports;c()(z,{VBtn:V["a"],VCard:R["a"],VCardText:q["a"],VCol:A["a"],VDialog:E["a"],VForm:T["a"],VIcon:C["a"],VRow:F["a"],VSpacer:I["a"],VTab:J["a"],VTabItem:M["a"],VTabs:$["a"],VTabsSlider:L["a"],VTextField:U["a"]});var D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Hi "+e._s(e.user.user.firstname)+"!")]),r("p",[e._v("You're logged in with Vue + Vuex & JWT!!")]),r("h3",[e._v("Users from secure api end point:")]),e.users.loading?r("em",[e._v("Loading users...")]):e._e(),e.users.error?r("span",{staticClass:"text-danger"},[e._v("ERROR: "+e._s(e.users.error))]):e._e(),e.users.items?r("ul",e._l(e.users.items,(function(t){return r("li",{key:t.id},[e._v(" "+e._s(t.firstName+" "+t.lastName)+" ")])})),0):e._e(),r("p",{on:{click:e.logout}},[r("router-link",{attrs:{to:"/login"}},[e._v("Logout")])],1)])},G=[],H={name:"UserPage",computed:Object(j["a"])({},Object(p["c"])({user:function(e){return e.user},users:function(e){return e.users.all}})),created:function(){this.getAllUsers()},methods:Object(j["a"])(Object(j["a"])({},Object(p["b"])("users",{getAllUsers:"getAll"})),Object(p["b"])("user",{logout:"logout"}))},W=H,Y=Object(i["a"])(W,D,G,!1,null,null,null),K=Y.exports;a["a"].use(_["a"]);var Q=new _["a"]({mode:"history",routes:[{path:"/login",component:B},{path:"/",component:K},{path:"/page-not-found",alias:"*",component:{render:function(e){return e("div",["404! Page Not Found!"])}}}]});Q.beforeEach((function(e,t,r){var a=["/login"],n=!a.includes(e.path),s=localStorage.getItem("user");if(n&&!s)return r("/login");r()}));var X=Q,Z=JSON.parse(localStorage.getItem("user")),ee=Z?{status:{loggedIn:!0},user:Z}:{status:{},user:null},te={login:function(e,t){var r=e.commit,a=t.username,n=t.password;r("loginRequest",{username:a}),v.login(a,n).then((function(e){r("loginSuccess",e),X.push("/")}),(function(e){r("loginFailure",e)}))},logout:function(e){var t=e.commit;v.logout(),t("logout")},register:function(e,t){v.register(t).then((function(e){console.log(e.status)}),(function(e){console.log(e)}))}},re={loginRequest:function(e,t){e.status={loggingIn:!0},e.user=t},loginSuccess:function(e,t){e.status={loggedIn:!0},e.user=t},loginFailure:function(e){e.status={},e.user=null},logout:function(e){e.status={},e.user=null}},ae={namespaced:!0,state:ee,actions:te,mutations:re},ne={all:{}},se={getAll:function(e){var t=e.commit;t("getAllRequest"),v.getAll().then((function(e){return t("getAllSuccess",e)}),(function(e){return t("getAllFailure",e)}))}},oe={getAllRequest:function(e){e.all={loading:!0}},getAllSuccess:function(e,t){e.all={items:t}},getAllFailure:function(e,t){e.all={error:t}}},le={namespaced:!0,state:ne,actions:se,mutations:oe};a["a"].use(p["a"]);var ie=new p["a"].Store({modules:{user:ae,users:le}}),ue=r("f309");a["a"].use(ue["a"]);var ce=new ue["a"]({});a["a"].config.productionTip=!1,new a["a"]({store:ie,router:X,vuetify:ce,render:function(e){return e(m)}}).$mount("#app")}});
//# sourceMappingURL=app.d897555d.js.map